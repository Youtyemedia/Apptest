<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Collection</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      body { font-family: 'Plus Jakarta Sans', 'Noto Sans', sans-serif; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root">
        <!-- Header -->
        <div class="flex items-center bg-white p-4 pb-2 justify-between border-b border-gray-200">
            <a href="mie collezioni.html" class="text-[#171212] flex size-12 shrink-0 items-center" data-icon="ArrowLeft" data-size="24px" data-weight="regular" title="Back to My Collections">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                </svg>
            </a>
            <h2 class="text-[#171212] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-12">Create New Collection</h2>
        </div>

        <!-- Form Section -->
        <div class="p-6 @container">
            <form id="createCollectionForm" class="space-y-6">
                <div>
                    <label for="title" class="block text-sm font-medium text-gray-700">Title <span class="text-red-500">*</span></label>
                    <input type="text" name="title" id="title" required
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="volume" class="block text-sm font-medium text-gray-700">Volume</label>
                    <input type="text" name="volume" id="volume"
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="publication_years" class="block text-sm font-medium text-gray-700">Publication Years</label>
                    <input type="text" name="publication_years" id="publication_years" placeholder="e.g., 1990-2000 or 2021-Present"
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <label for="cover_image_url" class="block text-sm font-medium text-gray-700">Cover Image URL</label>
                    <input type="url" name="cover_image_url" id="cover_image_url" placeholder="https://example.com/image.jpg"
                           class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
                <div>
                    <button type="submit"
                            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#171212] hover:bg-opacity-80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Create Collection
                    </button>
                </div>
            </form>
            <div id="messageArea" class="mt-4 text-center"></div>
        </div>

        <!-- Navigation Bar -->
        <div class="mt-auto">
            <div class="flex gap-2 border-t border-[#f4f1f1] bg-white px-4 pb-3 pt-2">
                <a class="just flex flex-1 flex-col items-center justify-end gap-1 rounded-full text-[#82686a]" href="mie collezioni.html"> <!-- Not active -->
                     <div class="text-[#82686a] flex h-8 items-center justify-center" data-icon="House" data-size="24px" data-weight="regular">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M216.49,100.29l-80-75.48a16,16,0,0,0-21,0l-80,75.48A16,16,0,0,0,24,115.55V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V160a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16v48a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V115.55A16,16,0,0,0,216.49,100.29ZM208,208H176V160a32,32,0,0,0-32-32H112a32,32,0,0,0-32,32v48H40V115.55l80-75.48,80,75.48Z"></path></svg>
                    </div>
                </a>
                <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#82686a]" href="#">
                    <div class="text-[#82686a] flex h-8 items-center justify-center" data-icon="MagnifyingGlass" data-size="24px" data-weight="regular"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path></svg>
                    </div>
                </a>
                <a class="just flex flex-1 flex-col items-center justify-end gap-1 rounded-full text-[#171212]" href="crea_collezioni_page.html"> <!-- Active -->
                    <div class="text-[#171212] flex h-8 items-center justify-center" data-icon="PlusSquare" data-size="24px" data-weight="fill"> <!-- Fill for active -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M224,40H32A16,16,0,0,0,16,56V200a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V56A16,16,0,0,0,224,40ZM136,136v24a8,8,0,0,1-16,0V136H96a8,8,0,0,1,0-16h24V96a8,8,0,0,1,16,0v24h24a8,8,0,0,1,0,16Z"></path></svg>
                    </div>
                </a>
                <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#82686a]" href="#">
                    <div class="text-[#82686a] flex h-8 items-center justify-center" data-icon="BookmarkSimple" data-size="24px" data-weight="regular"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M192,24H64A16,16,0,0,0,48,40V224a8,8,0,0,0,12.48,6.93L128,190l67.52,40.9A8,8,0,0,0,208,224V40A16,16,0,0,0,192,24Zm0,178.42l-59.52-36.07a8,8,0,0,0-9,0L64,202.42V40H192Z"></path></svg>
                    </div>
                </a>
                <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#82686a]" href="#">
                    <div class="text-[#82686a] flex h-8 items-center justify-center" data-icon="User" data-size="24px" data-weight="regular"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path></svg>
                    </div>
                </a>
            </div>
            <div class="h-5 bg-white"></div>
        </div>
    </div>
    <script>
        document.getElementById('createCollectionForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const title = document.getElementById('title').value;
            const volume = document.getElementById('volume').value;
            const publication_years = document.getElementById('publication_years').value;
            const cover_image_url = document.getElementById('cover_image_url').value;
            const messageArea = document.getElementById('messageArea');
            messageArea.textContent = '';
            messageArea.className = 'mt-4 text-center';
            if (!title) {
                messageArea.textContent = 'Title is required.';
                messageArea.classList.add('text-red-500');
                return;
            }
            const collectionData = {
                title: title,
                volume: volume || null,
                publication_years: publication_years || null,
                cover_image_url: cover_image_url || null
            };
            try {
                const response = await fetch('/collections', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', },
                    body: JSON.stringify(collectionData),
                });
                const result = await response.json();
                if (response.ok) {
                    messageArea.textContent = 'Collection created! ID: ' + result.id;
                    messageArea.classList.add('text-green-500');
                    setTimeout(() => {
                         window.location.href = 'collezioni dettagli.html?id=' + result.id;
                    }, 1500);
                } else {
                    messageArea.textContent = 'Error: ' + (result.error || 'Unknown error');
                    messageArea.classList.add('text-red-500');
                }
            } catch (error) {
                console.error('Error submitting form:', error);
                messageArea.textContent = 'An error occurred. Check console.';
                messageArea.classList.add('text-red-500');
            }
        });
    </script>
</body>
</html>
